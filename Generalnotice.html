<!DOCTYPE html>
<html lang="ml">
<head>
  <meta charset="UTF-8">
  <title>തിരുവനന്തപുരം നഗരസഭ - അറിയിപ്പ്</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: 'Noto Sans Malayalam', 'Arial Unicode MS', Arial, sans-serif;
      padding: 30px;
      background: #f9f9f9;
      line-height: 1.7;
    }

    .container {
      max-width: 800px;
      margin: auto;
      background: white;
      padding: 30px;
      border: 1px solid #ccc;
    }

    .header {
      text-align: center;
      margin-bottom: 20px;
    }

    .header img {
      width: 100px;
    }

    .reference {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
      margin-bottom: 20px;
      border-bottom: 1px solid black;
      padding-bottom: 5px;
    }

    .section {
      margin-top: 20px;
    }

    .footer {
      margin-top: 40px;
      text-align: right;
    }

    .receiver {
      margin-top: 30px;
    }

    .blank-space {
      display: inline-block;
      border-bottom: 1px dotted #000;
      min-width: 150px;
      margin: 0 5px;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/70/Seal_of_Corporation_of_Thiruvananthapuram_by_dhevilal.svg/600px-Seal_of_Corporation_of_Thiruvananthapuram_by_dhevilal.svg.png?20180901020657" alt="Seal">
      <h2>തിരുവനന്തപുരം നഗരസഭ</h2>
    </div>

    <div class="reference">
      <div>നമ്പർ: <span id="noticeNo"></span></div>
      <div>തീയതി: <span id="noticeDate"></span></div>
    </div>

    <div class="section">
      <h3 style="text-align: center; text-decoration: underline;">അറിയിപ്പ്</h3>
    </div>

    <div class="section">
      <p style="text-align: justify"><strong>വിഷയം:</strong> തിരുവനന്തപുരം  നഗരസഭ  എഞ്ചിനീയറിംഗ് വിഭാഗം - നിർമ്മാണം - പരാതി സംബന്ധിച്ച്.</p>
      <p><strong>സൂചന:</strong><br>
        <span style="display: block; margin-bottom: 60px;">1.</span>
        <span style="display: block; margin-bottom: 60px;">2.</span>
      </p>


      <p>ഉടമയുടെ പേര് / വീട്ടുപേര്: <span class="blank-space" id="owner1"></span></p>
      <p>വാർഡിന്റെ പേര് / നമ്പർ: <span class="blank-space" id="ward1"></span></p>
      <p>കെട്ടിട നമ്പർ (ടി.സി നമ്പർ): <span class="blank-space" id="doorNo1"></span></p>
      <p  style="margin-bottom: 40px;">സർവ്വേ നമ്പർ: <span class="blank-space" id="surveyNo1">......</span></p>
    </div>

    <div class="section">
      <p style="text-align: justify">സൂചനകളിലേക്കു ശ്രദ്ധ ക്ഷണിക്കുന്നു. മേൽ സൂചിത <span class="blank-space" id="noticeType">..................</span> അറിയിപ്പ് / പരാതി - യുടെ അടിസ്ഥാനത്തിൽ നടത്തിയ സ്ഥല പരിശോധനയിൽ ചുവടെ സൂചിപ്പിച്ചിരിക്കുന്ന വസ്തുതകൾ / ന്യൂനതകൾ കണ്ടെത്തിയിരിക്കുന്നു.</p>
      <ol>
        <li style="margin-bottom: 60px;"><span id="fact1"></span></li>
        <li style="margin-bottom: 60px;"><span id="fact2"></span></li>
        <li style="margin-bottom: 60px;"><span id="fact3"></span></li>
        <li style="margin-bottom: 60px;"><span id="fact4"></span></li>
      </ol>

      <p style="text-align: justify">അതിനാൽ ഈ നോട്ടീസ് കൈപ്പറ്റി <span class="blank-space" id="daysLimit">........</span> ദിവസത്തിനകം പ്രസ്തുത നിർമ്മാണം സംബന്ധിച്ചുള്ള വിശദീകരണം ലഭ്യമായ അനുമതിയുടെയും മറ്റും രേഖകൾ സഹിതം ഈ കാര്യാലയത്തിൽ ഹാജരാകേണ്ടതാകുന്നു. ആയതിൽ വീഴ്ച വരുത്തുന്ന പക്ഷം താങ്കൾക്ക് ഇ വിഷയത്തിൽ ഏതൊന്നും ബോധിപ്പിക്കാനില്ല എന്ന നിഗമനത്തിൽ കേരള മുനിസിപ്പാലിറ്റി ആക്ട് 1995 ആൻഡ് KMBR 19 എന്നിവയുടെ ചട്ടങ്ങൾ പ്രകാരം തുടർ നടപടികൾ സ്വീകരിക്കുന്നതാണ്.</p>
    </div>

    <div class="footer">
      <p><strong>അസിസ്റ്റന്റ് എഞ്ചിനീയർ</strong><br>തിരുവനന്തപുരം നഗരസഭ</p>
    </div>

    <div class="receiver">
      <p><strong>സ്വീകർത്താവ്:</strong></p>
      <p><strong>പകർപ്പ്:</strong><br>1. <br>2.</p>
    </div>
  </div>

  <script>
    function evaluateArcadeExpression(feature, expression) {
      try {
        if (!expression || !feature) return "";
        if (expression.startsWith('$feature.')) {
          const fieldName = expression.replace('$feature.', '').trim();
          return feature[fieldName] || "";
        }
        return expression;
      } catch (error) {
        console.error("Arcade evaluation error:", error);
        return "";
      }
    }

    function getFeatureFromParams() {
      const params = new URLSearchParams(window.location.search);
      return {
        WARD_NAME: params.get("ward"),
        DOOR_NO: params.get("id"),
        OWNER_NAME: params.get("owner"),
        SURVEY_NO: params.get("surveyNo"),
        NOTICE_TYPE: params.get("noticeType"),
        FACT1: params.get("fact1"),
        FACT2: params.get("fact2"),
        FACT3: params.get("fact3"),
        FACT4: params.get("fact4"),
        DAYS: params.get("days")
      };
    }

    function applyArcadeData() {
      const feature = getFeatureFromParams();

      const owner = evaluateArcadeExpression(feature, "$feature.OWNER_NAME");
      const ward = evaluateArcadeExpression(feature, "$feature.WARD_NAME");
      const doorNo = evaluateArcadeExpression(feature, "$feature.DOOR_NO");
      const surveyNo = evaluateArcadeExpression(feature, "$feature.SURVEY_NO");
      const noticeType = evaluateArcadeExpression(feature, "$feature.NOTICE_TYPE");
      const fact1 = evaluateArcadeExpression(feature, "$feature.FACT1");
      const fact2 = evaluateArcadeExpression(feature, "$feature.FACT2");
      const fact3 = evaluateArcadeExpression(feature, "$feature.FACT3");
      const fact4 = evaluateArcadeExpression(feature, "$feature.FACT4");
      const days = evaluateArcadeExpression(feature, "$feature.DAYS");

      document.getElementById("noticeNo").textContent = generateNoticeNumber();
      document.getElementById("noticeDate").textContent = new Date().toLocaleDateString('en-IN');

      document.getElementById("owner1").textContent = owner;
      document.getElementById("ward1").textContent = ward;
      document.getElementById("doorNo1").textContent = doorNo;
      document.getElementById("surveyNo1").textContent = surveyNo;

      document.getElementById("noticeType").textContent = noticeType || "....";
      document.getElementById("fact1").textContent = fact1 || "";
      document.getElementById("fact2").textContent = fact2 || "";
      document.getElementById("fact3").textContent = fact3 || "";
      document.getElementById("fact4").textContent = fact4 || "";
      document.getElementById("daysLimit").textContent = days || "........";
    }

    function generateNoticeNumber() {
      const year = new Date().getFullYear();
      const month = String(new Date().getMonth() + 1).padStart(2, '0');
      const random = Math.floor(10000 + Math.random() * 90000);
      return `TMC/CN/${year}-${month}/${random}`;
    }

    window.onload = applyArcadeData;
  </script>
</body>
</html>
