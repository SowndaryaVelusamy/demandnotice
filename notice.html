<!DOCTYPE html>
<html lang="ml">
<head>
  <meta charset="UTF-8">
  <title>റവന്യൂ റിക്കവറി ഡിമാൻഡ് നോട്ടീസ്</title>
  <style>
    @media print {
      @page {
        size: A4 portrait;
        margin: 25mm;
      }
    }

    body {
      font-family: 'Noto Sans Malayalam', sans-serif;
      line-height: 1.7;
      margin: 25mm;
    }
    .logo {
      width: 100px;
      height: 100px;
    }
    .header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
    }

    .header h2 {
      margin: 0;
      font-size: 22px;
    }

    .header-right {
      text-align: right;
      font-size: 14px;
    }

    .header-right h3 {
      margin: 0 0 8px 0;
      font-size: 18px;
    }

    .meta-info {
      margin-top: 10px;
    }

    h1 {
      text-align: center;
      font-size: 22px;
      margin: 30px 0 10px;
      text-decoration: underline;
    }

    .info-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      margin-bottom: 25px;
    }

    .info-table td {
      border: 1px solid #000;
      padding: 8px;
      font-size: 15px;
    }

    .info-label {
      background-color: #f2f2f2;
      font-weight: bold;
      width: 35%;
    }

    .tax-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    .tax-table th,
    .tax-table td {
      border: 1px solid #000;
      padding: 6px;
      text-align: center;
      font-size: 14px;
    }

    .footer, .signature {
      margin-top: 30px;
      font-size: 15px;
    }

    .signature {
      text-align: right;
    }

    .footer-note {
      font-size: 13px;
      font-style: italic;
      margin-top: 20px;
    }
  </style>
</head>

<body>
  <div class="header">
    <div class="logo"><img src="https://upload.wikimedia.org/wikipedia/commons/a/a1/Seal_of_Thiruvananthapuram.png" alt="Trivandrum Corporation Logo" class="logo"></div>
    <div class="header-right">
      <h3>തിരുവനന്തപുരം മുനിസിപ്പൽ കോർപ്പറേഷൻ</h3>
      <div class="meta-info">
        Phone: 0471-2320821<br>
        Email: tvpmcorpn@gmail.com<br>
        Website: https://tmc.lsgkerala.gov.in<br>
      </div>
    </div>
  </div>
  
  <strong>നോട്ടീസ് നമ്പർ:</strong> <span id="noticeNumber"></span>
  
  <h1>ഡിമാൻഡ് നോട്ടീസ്</h1>

  <p style="text-align: justify;">
    2011 ലെ കേരള മുനിസിപ്പാലിറ്റി (വസ്തുനികുതിയും സേവന ഉപനികുതിയും സർചാർജും) ചട്ടങ്ങളിലെ ചട്ടം 19 പ്രകാരം
    വസ്തുനികുതി ഒടുക്കുന്നതിനു ആവശ്യപ്പെടുന്ന നോട്ടീസ്.
  </p>

  <table class="info-table">
    <tr>
      <td class="info-label">ഉടമയുടെ പേര് / വീട്ടുപേര്</td>
      <td><span id="owner"></span></td>
    </tr>
    <tr>
      <td class="info-label">Owner Name / House Name</td>
      <td><span id="owner2"></span></td>
    </tr>
    <tr>
      <td class="info-label">കെട്ടിടത്തിന്റെ ഐഡി</td>
      <td>T<span id="newpropId"></span></td>
    </tr>
    <tr>
      <td class="info-label">വാർഡ്</td>
      <td><span id="ward"></span></td>
    </tr>
    <tr>
      <td class="info-label">കെട്ടിട നമ്പർ / സബ് നമ്പർ</td>
      <td><span id="propertyId"></span></td>
    </tr>
  </table>

  <table class="tax-table">
    <tr>
      <th>ക്രമം</th>
      <th>കാലയളവ്</th>
      <th>വസ്തുനികുതി (₹)</th>
      <th>ഗ്രന്ഥശാല വരി (₹)</th>
      <th>സേവന നികുതി (₹)</th>
      <th>സർചാർജ് (₹)</th>
      <th>ആകെ (₹)</th>
      <th>അവസാന തീയതി</th>
      <th>പിഴ / പലിശ (₹)</th>
      <th>റിമാർക്ക്</th>
    </tr>
    <tr>
      <td>1</td>
      <td>2023 - 2024 (First Half)</td>
      <td><span id="halfTax"></span></td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td><span id="halfTotal"></span></td>
      <td><span id="dueDate"></span></td>
      <td><span id="penalty"></span></td>
      <td>-</td>
    </tr>
    <tr>
      <td>2</td>
      <td>2023 - 2024 (Second Half)</td>
      <td><span id="halfTax2"></span></td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td><span id="halfTotal2"></span></td>
      <td><span id="dueDate2"></span></td>
      <td><span id="penalty2"></span></td>
      <td>-</td>
    </tr>
    <tr>
      <td>3</td>
      <td>2024 - 2025 (First Half)</td>
      <td><span id="halfTax3"></span></td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td><span id="halfTotal3"></span></td>
      <td><span id="dueDate3"></span></td>
      <td><span id="penalty3"></span></td>
      <td>-</td>
    </tr>
    <tr>
      <td>4</td>
      <td>2024 - 2025 (Second Half)</td>
      <td><span id="halfTax4"></span></td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td><span id="halfTotal4"></span></td>
      <td><span id="dueDate4"></span></td>
      <td><span id="penalty4"></span></td>
      <td>-</td>
    </tr>
    <tr>
      <td>5</td>
      <td>2025 - 2026 (First Half)</td>
      <td><span id="halfTax5"></span></td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td><span id="halfTotal5"></span></td>
      <td><span id="dueDate5"></span></td>
      <td><span id="penalty5"></span></td>
      <td>-</td>
    </tr>
  </table>

  <div class="footer">
    <p><strong>ആകെ തുക (വർഷങ്ങൾക്കായി):</strong> <span id="annualTax"></span></p>
    <p><strong>പിഴ / പലിശ ഉൾപ്പെടെ അടവാക്കേണ്ട തുക:</strong> <span id="totalWithPenalty"></span></p>
    <p>** ഡിമാൻഡ് നോട്ടീസ് ഫീസ്: ₹10</p>
    <p>** നോട്ടീസ് നടത്തുന്നതിനുള്ള ചിലവ്: ₹10</p>
    <p><strong>ആകെ അടവാക്കേണ്ട തുക: ₹<span id="totalDue"></span></strong></p>

    <p>
      മേൽക്കാണിച്ചിരിക്കുന്ന സ്റ്റേറ്റ്മെന്റിൽ വിശദീകരിച്ചിരിക്കുന്ന തരത്തിൽ, ₹<span id="finalAmount"></span> രൂപ ഈ
      നോട്ടീസ് ലഭിക്കുന്ന തീയതിയിൽ നിന്നും 15 ദിവസത്തിനകം ഈ ഓഫീസിൽ അടയ്ക്കേണ്ടതാണ്. അപ്രകാരം
      ചെയ്തില്ലെങ്കിൽ, 1994 ലെ കേരള മുനിസിപ്പാലിറ്റി ആക്ട് 538 പ്രകാരം ജപ്തി അടക്കമുള്ള നിയമനടപടികൾ
      സ്വീകരിക്കപ്പെടും.
    </p>
    <p>ജപ്തി അസാധ്യമായ പക്ഷത്തിൽ, താങ്കളെ നിയമപരമായി പ്രോസിക്യൂട്ട് ചെയ്യുന്നതുമാകുന്നു.</p>
  </div>

  <div class="signature">
    <p>നോട്ടീസ് തീയതി: <span id="currentDate"></span></p>
    <p><strong>(സെക്രട്ടറി)</strong></p>
  </div>

  <div class="footer-note">
    ** അതാത് കാലങ്ങളിലെ സർക്കാർ ഉത്തരവുകൾ / സർക്കുലറുകൾ പ്രകാരമുള്ള വ്യത്യാസങ്ങൾ നിലവിൽ വരാം.
  </div>

  <script>
    function getQueryParam(param) {
      let params = new URLSearchParams(window.location.search);
      return params.get(param) || "N/A";
    }

    function generateNoticeNumber() {
      // Generate a random notice number format: TMC/RRN/YYYY-MM/XXXXX
      const year = new Date().getFullYear();
      const month = String(new Date().getMonth() + 1).padStart(2, '0');
      const random = Math.floor(10000 + Math.random() * 90000); // 5-digit number
      return `TMC/RRN/${year}-${month}/${random}`;
    }

    function calculateTaxValues() {
      // Get base tax amount
      const annualTax = parseFloat(getQueryParam("tax")) || 0;
      const halfTax = annualTax / 2;
      
      // Fill tax values for each period
      document.getElementById("halfTax").textContent = halfTax.toFixed(2);
      document.getElementById("halfTax2").textContent = halfTax.toFixed(2);
      document.getElementById("halfTax3").textContent = halfTax.toFixed(2);
      document.getElementById("halfTax4").textContent = halfTax.toFixed(2);
      document.getElementById("halfTax5").textContent = halfTax.toFixed(2);
      
      // Fill total values for each period
      document.getElementById("halfTotal").textContent = halfTax.toFixed(2);
      document.getElementById("halfTotal2").textContent = halfTax.toFixed(2);
      document.getElementById("halfTotal3").textContent = halfTax.toFixed(2);
      document.getElementById("halfTotal4").textContent = halfTax.toFixed(2);
      document.getElementById("halfTotal5").textContent = halfTax.toFixed(2);
      
      // Calculate penalties (for demo: 5% of tax amount if applicable)
      const penalty = parseFloat(getQueryParam("penalty")) || 0;
      document.getElementById("penalty").textContent = penalty.toFixed(2);
      document.getElementById("penalty2").textContent = penalty.toFixed(2);
      document.getElementById("penalty3").textContent = "0.00";
      document.getElementById("penalty4").textContent = "0.00";
      document.getElementById("penalty5").textContent = "0.00";
      
      // Calculate totals
      const totalWithPenalty = annualTax + (penalty * 2);
      const finalTotal = totalWithPenalty + 20; // Adding ₹20 for notice fees
      
      document.getElementById("totalWithPenalty").textContent = "₹" + totalWithPenalty.toFixed(2);
      document.getElementById("finalAmount").textContent = finalTotal.toFixed(2);
      document.getElementById("totalDue").textContent = finalTotal.toFixed(2);
    }

    // Fill all fields on page load
    window.onload = function() {
      document.getElementById("noticeNumber").textContent = generateNoticeNumber();
      document.getElementById("currentDate").textContent = new Date().toLocaleDateString('en-IN');
      
      // Property details
      document.getElementById("owner").textContent = getQueryParam("owner");
      document.getElementById("owner2").textContent = getQueryParam("owner");
      document.getElementById("newpropId").textContent = getQueryParam("id");
      document.getElementById("propertyId").textContent = getQueryParam("id");
      document.getElementById("ward").textContent = getQueryParam("ward");
      
      // Tax details
      document.getElementById("annualTax").textContent = "₹" + getQueryParam("tax");
      
      // Due dates (for demo: set to 30 days from now for each period)
      const dueDate = new Date();
      dueDate.setDate(dueDate.getDate() + 30);
      const dueDateStr = dueDate.toLocaleDateString('en-IN');
      
      document.getElementById("dueDate").textContent = dueDateStr;
      document.getElementById("dueDate2").textContent = dueDateStr;
      document.getElementById("dueDate3").textContent = dueDateStr;
      document.getElementById("dueDate4").textContent = dueDateStr;
      document.getElementById("dueDate5").textContent = dueDateStr;
      
      // Calculate all tax values
      calculateTaxValues();
    };
  </script>
</body>
</html>
